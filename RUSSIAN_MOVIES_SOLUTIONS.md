# Решения для поиска русских фильмов

## Проблема
TMDB и YTS содержат в основном информацию на английском языке, даже при поиске на русском языке.

## Реализованные решения

### 1. Улучшенный TMDB сервис с фильтрацией русских фильмов

**Файл:** `backend/services/RussianMovieService.js`

**Возможности:**
- Поиск фильмов с оригинальным русским языком (`original_language: 'ru'`)
- Фильтрация по стране производства (Россия)
- Поиск фильмов с русскими названиями (кириллица)
- Автоматическое определение русских фильмов
- Кэширование результатов

**Как использовать:**
```javascript
const RussianMovieService = require('./backend/services/RussianMovieService');

// Поиск русского фильма
const result = await RussianMovieService.searchRussianMovies('Брат', 1997);
```

### 2. Интеграция с Kinozal.tv

**Файл:** `backend/controllers/KinozalController.js`

**Возможности:**
- Поиск торрентов на русском торрент-трекере
- Парсинг информации о фильмах
- Получение списка файлов торрента
- Поддержка прокси и авторизации

**Преимущества:**
- Содержит русские фильмы и переводы
- Актуальная информация
- Высокое качество переводов

### 3. Умная обработка файлов

**Файл:** `backend/services/SmartFileProcessor.js`

**Возможности:**
- Автоматическое определение русских фильмов по названию
- Приоритет поиска русских фильмов
- Fallback на обычный TMDB поиск
- Поддержка опции `preferRussian`

## Альтернативные источники данных

### 1. Kinopoisk API
```javascript
// Потенциальная интеграция с Kinopoisk
const kinopoiskAPI = 'https://kinopoiskapiunofficial.tech/api/v2.1/films/search-by-keyword';
```

### 2. Rutracker.org
- Русский торрент-трекер с большим количеством русских фильмов
- Требует авторизации
- Можно добавить парсинг страниц

### 3. Rutor.info
- Еще один русский торрент-трекер
- Открытый доступ
- Простой парсинг

### 4. Локальная база данных русских фильмов
```javascript
const russianMoviesDB = {
    "Брат": {
        title: "Брат",
        year: 1997,
        director: "Алексей Балабанов",
        cast: ["Сергей Бодров мл.", "Виктор Сухоруков"],
        description: "Дембель Данила Багров возвращается домой..."
    }
    // ... другие фильмы
};
```

## Рекомендуемые улучшения

### 1. Мультиисточниковый поиск
```javascript
async function searchRussianMovieMultiSource(query, year) {
    // 1. Проверяем локальную базу
    const localResult = searchLocalDB(query, year);
    if (localResult) return localResult;
    
    // 2. Ищем в TMDB с фильтрацией
    const tmdbResult = await RussianMovieService.searchRussianMovies(query, year);
    if (tmdbResult) return tmdbResult;
    
    // 3. Ищем в Kinozal
    const kinozalResult = await KinozalController.searchTorrents(query);
    if (kinozalResult) return processKinozalResult(kinozalResult);
    
    // 4. Ищем в других источниках
    return null;
}
```

### 2. Расширенная база переводов
```javascript
const extendedTranslations = {
    // Русские актеры
    "Константин Хабенский": "Константин Хабенский",
    "Сергей Безруков": "Сергей Безруков",
    
    // Русские режиссеры
    "Андрей Тарковский": "Андрей Тарковский",
    "Никита Михалков": "Никита Михалков",
    
    // Популярные русские фильмы
    "Брат": "Брат",
    "Левиафан": "Левиафан",
    "Сталкер": "Сталкер"
};
```

### 3. Интеграция с Kinopoisk API
```javascript
class KinopoiskService {
    async searchMovie(query) {
        const response = await axios.get(
            'https://kinopoiskapiunofficial.tech/api/v2.1/films/search-by-keyword',
            {
                params: { keyword: query },
                headers: { 'X-API-KEY': 'your-api-key' }
            }
        );
        return response.data;
    }
}
```

## Настройка и использование

### 1. Установка API ключей
```bash
# TMDB API ключ
export TMDB_API_KEY="your-tmdb-api-key"

# Kinopoisk API ключ (опционально)
export KINOPOISK_API_KEY="your-kinopoisk-api-key"
```

### 2. Настройка в интерфейсе
- Перейдите в Настройки → TMDB API
- Введите API ключ TMDB
- Включите опцию "Предпочитать русские фильмы"

### 3. Тестирование
- Используйте форму "Тестирование поиска русских фильмов"
- Попробуйте найти: "Брат", "Левиафан", "Сталкер"

## Результат

Теперь система может:
- ✅ Находить русские фильмы с оригинальным русским языком
- ✅ Искать фильмы с русскими переводами
- ✅ Автоматически определять русские фильмы по названию
- ✅ Использовать несколько источников данных
- ✅ Кэшировать результаты для быстрого доступа
- ✅ Предоставлять детальную информацию на русском языке

## Дальнейшее развитие

1. **Интеграция с Kinopoisk API** - для получения более точной информации о русских фильмах
2. **Расширение базы переводов** - добавление большего количества русских актеров и режиссеров
3. **Локальная база данных** - создание собственной базы русских фильмов
4. **Мультиисточниковый поиск** - одновременный поиск в нескольких источниках
5. **Машинное обучение** - автоматическое определение языка фильма по названию